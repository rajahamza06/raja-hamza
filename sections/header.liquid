<header-component
  id="flex-header"
  {% if section.settings.sticky_header != 'none' %}
    sticky="{{ section.settings.sticky_header }}"
  {% endif %}
  style="background-color: {{ section.settings.header_bg_color }}; padding:15px 20px;"
>
  <div style="display:flex; justify-content:space-between; align-items:center; gap:20px; flex-wrap:wrap; text-align:center;">

    {%- comment -%} Logo {%- endcomment -%}
    <div>
      {% if section.settings.use_text_logo %}
        <h2 style="margin:0; font-weight:bold; font-size:24px; color: {{ section.settings.logo_text_color }};">
          {{ section.settings.logo_text }}
        </h2>
      {% elsif section.settings.logo_image != blank %}
        <img src="{{ section.settings.logo_image | image_url: width: 150 }}" 
             alt="Logo" 
             style="max-height:60px;">
      {% else %}
        <h2 style="margin:0; font-weight:bold; font-size:24px; color: {{ section.settings.logo_text_color }};">
          {{ shop.name }}
        </h2>
      {% endif %}
    </div>

    {%- comment -%} Text  {%- endcomment -%}
    <div style="flex:1; text-align:center;">
      <p style="margin:0;">{{ section.settings.middle_text }}</p>
    </div>

    {%- comment -%} Button {%- endcomment -%}
    <div>
      {% if section.settings.button_text != blank %}
        <a href="{{ section.settings.button_link }}" 
           style="
             background: {{ section.settings.button_bg }};
             color: {{ section.settings.button_color }};
             padding: 10px 18px;
             border-radius: 6px;
             text-decoration: none;
             font-weight: bold;
             transition: all 0.3s ease;
             display:inline-block;
           "
           onmouseover="this.style.background='{{ section.settings.button_hover_bg }}';this.style.color='{{ section.settings.button_hover_color }}';"
           onmouseout="this.style.background='{{ section.settings.button_bg }}';this.style.color='{{ section.settings.button_color }}';"
        >
          {{ section.settings.button_text }}
        </a>
      {% endif %}
    </div>

  </div>
</header-component>

<script type="module">
  document.addEventListener('scroll', () => {
    const header = document.getElementById('flex-header');
    if(header.hasAttribute('sticky')){
      if(window.scrollY > 50){
        header.setAttribute('data-sticky-state','active');
      } else {
        header.setAttribute('data-sticky-state','idle');
      }
    }
  });
</script>

{% schema %}
{
  "name": "Flex Header",
  "settings": [
    {
      "type": "checkbox",
      "id": "use_text_logo",
      "label": "Use Text Logo",
      "default": false
    },
    {
      "type": "text",
      "id": "logo_text",
      "label": "Logo Text",
      "default": "My Store"
    },
    {
      "type": "color",
      "id": "logo_text_color",
      "label": "Logo Text Color",
      "default": "#000000"
    },
    {
      "type": "image_picker",
      "id": "logo_image",
      "label": "Logo Image"
    },
    {
      "type": "text",
      "id": "middle_text",
      "label": "Middle Text",
      "default": "Welcome to Our Store!"
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button Text",
      "default": "Learn More"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "Button Link",
      "default": "/collections/all"
    },
    {
      "type": "color",
      "id": "button_bg",
      "label": "Button Background",
      "default": "#f7931e"
    },
    {
      "type": "color",
      "id": "button_color",
      "label": "Button Text Color",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "button_hover_bg",
      "label": "Button Hover Background",
      "default": "#000000"
    },
    {
      "type": "color",
      "id": "button_hover_color",
      "label": "Button Hover Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "header_bg_color",
      "label": "Header Background Color",
      "default": "#ffffff"
    },
    {
      "type": "select",
      "id": "sticky_header",
      "label": "Sticky Header",
      "options": [
        { "value": "always", "label": "Always" },
        { "value": "scroll-up", "label": "On Scroll Up" },
        { "value": "none", "label": "Never" }
      ],
      "default": "always"
    }
  ],
  "presets": [
    {
      "name": "Flex Header"
    }
  ]
}
{% endschema %}
